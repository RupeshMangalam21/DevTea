"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/websocket/route";
exports.ids = ["app/api/websocket/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebsocket%2Froute&page=%2Fapi%2Fwebsocket%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebsocket%2Froute.ts&appDir=T%3A%5CDevTea%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=T%3A%5CDevTea&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebsocket%2Froute&page=%2Fapi%2Fwebsocket%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebsocket%2Froute.ts&appDir=T%3A%5CDevTea%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=T%3A%5CDevTea&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var T_DevTea_app_api_websocket_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/websocket/route.ts */ \"(rsc)/./app/api/websocket/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/websocket/route\",\n        pathname: \"/api/websocket\",\n        filename: \"route\",\n        bundlePath: \"app/api/websocket/route\"\n    },\n    resolvedPagePath: \"T:\\\\DevTea\\\\app\\\\api\\\\websocket\\\\route.ts\",\n    nextConfigOutput,\n    userland: T_DevTea_app_api_websocket_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/websocket/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3ZWJzb2NrZXQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRndlYnNvY2tldCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRndlYnNvY2tldCUyRnJvdXRlLnRzJmFwcERpcj1UJTNBJTVDRGV2VGVhJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1UJTNBJTVDRGV2VGVhJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNQO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2dGVhLWNoYXQvPzBjZTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiVDpcXFxcRGV2VGVhXFxcXGFwcFxcXFxhcGlcXFxcd2Vic29ja2V0XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS93ZWJzb2NrZXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS93ZWJzb2NrZXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3dlYnNvY2tldC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIlQ6XFxcXERldlRlYVxcXFxhcHBcXFxcYXBpXFxcXHdlYnNvY2tldFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvd2Vic29ja2V0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebsocket%2Froute&page=%2Fapi%2Fwebsocket%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebsocket%2Froute.ts&appDir=T%3A%5CDevTea%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=T%3A%5CDevTea&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/websocket/route.ts":
/*!************************************!*\
  !*** ./app/api/websocket/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n// Enhanced in-memory storage\nconst clients = new Map();\nconst messages = new Map();\nconst typingUsers = new Map();\nconst rooms = new Map();\nconst userRoomMemberships = new Map() // userId -> Set of roomIds\n;\n// Initialize default rooms and messages\nif (rooms.size === 0) {\n    console.log(\"Initializing default rooms...\");\n    // Create default rooms\n    rooms.set(\"general\", {\n        id: \"general\",\n        name: \"General\",\n        description: \"General discussion for all developers\",\n        createdBy: \"system\",\n        createdAt: Date.now(),\n        members: new Set(),\n        isPrivate: false,\n        isPublic: true\n    });\n    rooms.set(\"frontend\", {\n        id: \"frontend\",\n        name: \"Frontend Devs\",\n        description: \"React, Vue, Angular, and all things frontend\",\n        createdBy: \"system\",\n        createdAt: Date.now(),\n        members: new Set(),\n        isPrivate: false,\n        isPublic: true\n    });\n    rooms.set(\"backend\", {\n        id: \"backend\",\n        name: \"Backend Devs\",\n        description: \"APIs, databases, servers, and backend architecture\",\n        createdBy: \"system\",\n        createdAt: Date.now(),\n        members: new Set(),\n        isPrivate: false,\n        isPublic: true\n    });\n    rooms.set(\"mobile\", {\n        id: \"mobile\",\n        name: \"Mobile Development\",\n        description: \"iOS, Android, React Native, Flutter discussions\",\n        createdBy: \"system\",\n        createdAt: Date.now(),\n        members: new Set(),\n        isPrivate: false,\n        isPublic: true\n    });\n    rooms.set(\"devops\", {\n        id: \"devops\",\n        name: \"DevOps & Infrastructure\",\n        description: \"CI/CD, Docker, Kubernetes, cloud platforms\",\n        createdBy: \"system\",\n        createdAt: Date.now(),\n        members: new Set(),\n        isPrivate: false,\n        isPublic: true\n    });\n    // Add welcome messages for each room\n    const welcomeMessages = {\n        general: [\n            {\n                id: \"welcome-general-1\",\n                user: \"DevTea Bot\",\n                content: \"Welcome to the General discussion room! \\uD83D\\uDC4B This is where developers from all backgrounds come together to chat.\",\n                timestamp: Date.now() - 3600000,\n                type: \"room\",\n                roomId: \"general\"\n            },\n            {\n                id: \"welcome-general-2\",\n                user: \"DevTea Bot\",\n                content: \"\\uD83D\\uDCA1 Tip: You can join/leave rooms, create new ones, and send direct messages. Use the search to find rooms!\",\n                timestamp: Date.now() - 3500000,\n                type: \"room\",\n                roomId: \"general\"\n            }\n        ],\n        frontend: [\n            {\n                id: \"welcome-frontend-1\",\n                user: \"DevTea Bot\",\n                content: \"Welcome to Frontend Devs! \\uD83D\\uDE80 Share your React, Vue, Angular tips and discuss the latest in frontend development.\",\n                timestamp: Date.now() - 3600000,\n                type: \"room\",\n                roomId: \"frontend\"\n            },\n            {\n                id: \"welcome-frontend-2\",\n                user: \"DevTea Bot\",\n                content: \"\\uD83D\\uDD25 Hot topics: Component libraries, state management, performance optimization, and modern CSS!\",\n                timestamp: Date.now() - 3400000,\n                type: \"room\",\n                roomId: \"frontend\"\n            }\n        ],\n        backend: [\n            {\n                id: \"welcome-backend-1\",\n                user: \"DevTea Bot\",\n                content: \"Welcome to Backend Devs! \\uD83D\\uDD27 Discuss APIs, databases, server architecture, and backend best practices.\",\n                timestamp: Date.now() - 3600000,\n                type: \"room\",\n                roomId: \"backend\"\n            },\n            {\n                id: \"welcome-backend-2\",\n                user: \"DevTea Bot\",\n                content: \"\\uD83D\\uDCBE Popular topics: Microservices, database design, API security, and scalability patterns!\",\n                timestamp: Date.now() - 3300000,\n                type: \"room\",\n                roomId: \"backend\"\n            }\n        ],\n        mobile: [\n            {\n                id: \"welcome-mobile-1\",\n                user: \"DevTea Bot\",\n                content: \"Welcome to Mobile Development! \\uD83D\\uDCF1 Discuss iOS, Android, React Native, Flutter, and mobile best practices.\",\n                timestamp: Date.now() - 3600000,\n                type: \"room\",\n                roomId: \"mobile\"\n            }\n        ],\n        devops: [\n            {\n                id: \"welcome-devops-1\",\n                user: \"DevTea Bot\",\n                content: \"Welcome to DevOps & Infrastructure! âš™ï¸ Share knowledge about CI/CD, containerization, and cloud platforms.\",\n                timestamp: Date.now() - 3600000,\n                type: \"room\",\n                roomId: \"devops\"\n            }\n        ]\n    };\n    // Set welcome messages for each room\n    Object.entries(welcomeMessages).forEach(([roomId, roomMessages])=>{\n        messages.set(roomId, roomMessages);\n    });\n    console.log(`Initialized ${rooms.size} rooms with welcome messages`);\n}\nasync function GET(request) {\n    const upgrade = request.headers.get(\"upgrade\");\n    if (upgrade !== \"websocket\") {\n        return new Response(\"Expected websocket\", {\n            status: 400\n        });\n    }\n    return new Response(\"WebSocket upgrade not supported in development mode\", {\n        status: 501\n    });\n}\nasync function POST(request) {\n    try {\n        const { type, data, userId } = await request.json();\n        console.log(`API Request: ${type}`, {\n            userId,\n            data\n        });\n        switch(type){\n            case \"register\":\n                const existingClient = clients.get(data.userId);\n                const existingRooms = userRoomMemberships.get(data.userId) || new Set();\n                clients.set(data.userId, {\n                    userId: data.userId,\n                    username: data.username,\n                    lastSeen: Date.now(),\n                    joinedRooms: existingRooms\n                });\n                // Restore user to their previously joined rooms\n                existingRooms.forEach((roomId)=>{\n                    const room = rooms.get(roomId);\n                    if (room) {\n                        room.members.add(data.userId);\n                    }\n                });\n                console.log(`User registered: ${data.username} (${data.userId}), restored to ${existingRooms.size} rooms`);\n                return Response.json({\n                    success: true,\n                    type: \"registered\",\n                    data: {\n                        joinedRooms: Array.from(existingRooms),\n                        availableRooms: Array.from(rooms.keys())\n                    }\n                });\n            case \"join_room\":\n                const client = clients.get(userId);\n                if (!client) {\n                    return Response.json({\n                        success: false,\n                        error: \"User not found\"\n                    });\n                }\n                const room = rooms.get(data.roomId);\n                if (!room) {\n                    return Response.json({\n                        success: false,\n                        error: \"Room not found\"\n                    });\n                }\n                // Update client state\n                client.currentRoom = data.roomId;\n                client.lastSeen = Date.now();\n                room.members.add(userId);\n                client.joinedRooms.add(data.roomId);\n                // Persist membership\n                if (!userRoomMemberships.has(userId)) {\n                    userRoomMemberships.set(userId, new Set());\n                }\n                userRoomMemberships.get(userId).add(data.roomId);\n                const roomMessages = messages.get(data.roomId) || [];\n                console.log(`User ${client.username} joined room ${data.roomId}, found ${roomMessages.length} messages`);\n                return Response.json({\n                    success: true,\n                    type: \"room_joined\",\n                    data: {\n                        roomId: data.roomId,\n                        messages: roomMessages,\n                        memberCount: room.members.size\n                    }\n                });\n            case \"leave_room\":\n                const leavingClient = clients.get(userId);\n                if (!leavingClient) {\n                    return Response.json({\n                        success: false,\n                        error: \"User not found\"\n                    });\n                }\n                const leavingRoom = rooms.get(data.roomId);\n                if (!leavingRoom) {\n                    return Response.json({\n                        success: false,\n                        error: \"Room not found\"\n                    });\n                }\n                leavingRoom.members.delete(userId);\n                leavingClient.joinedRooms.delete(data.roomId);\n                // Persist the leave\n                const userMemberships = userRoomMemberships.get(userId);\n                if (userMemberships) {\n                    userMemberships.delete(data.roomId);\n                }\n                if (leavingClient.currentRoom === data.roomId) {\n                    leavingClient.currentRoom = undefined;\n                }\n                console.log(`User ${leavingClient.username} left room ${data.roomId}`);\n                return Response.json({\n                    success: true,\n                    type: \"room_left\",\n                    data: {\n                        roomId: data.roomId,\n                        memberCount: leavingRoom.members.size\n                    }\n                });\n            case \"send_message\":\n                console.log(\"=== API: Processing send_message ===\");\n                console.log(\"User ID:\", userId);\n                console.log(\"Message data:\", data);\n                const sender = clients.get(userId);\n                if (!sender) {\n                    console.error(\"Sender not found:\", userId);\n                    return Response.json({\n                        success: false,\n                        error: \"User not found\"\n                    });\n                }\n                const newMessage = {\n                    id: crypto.randomUUID(),\n                    user: data.username,\n                    content: data.content,\n                    timestamp: Date.now(),\n                    type: data.type,\n                    roomId: data.roomId,\n                    recipientId: data.recipientId\n                };\n                if (data.type === \"room\") {\n                    console.log(\"Processing room message for room:\", data.roomId);\n                    const targetRoom = rooms.get(data.roomId);\n                    if (!targetRoom) {\n                        console.error(\"Room not found:\", data.roomId);\n                        console.log(\"Available rooms:\", Array.from(rooms.keys()));\n                        return Response.json({\n                            success: false,\n                            error: \"Room not found\"\n                        });\n                    }\n                    // If user is not in the room, add them (this helps with newly created rooms)\n                    if (!targetRoom.members.has(userId)) {\n                        console.log(`Auto-adding user ${userId} (${sender.username}) to room ${data.roomId} for messaging`);\n                        targetRoom.members.add(userId);\n                        // Also update client's joined rooms\n                        sender.joinedRooms.add(data.roomId);\n                        // Update persistent memberships\n                        if (!userRoomMemberships.has(userId)) {\n                            userRoomMemberships.set(userId, new Set());\n                        }\n                        userRoomMemberships.get(userId).add(data.roomId);\n                    }\n                    // Initialize message array if it doesn't exist\n                    if (!messages.has(data.roomId)) {\n                        console.log(`Initializing message array for room ${data.roomId}`);\n                        messages.set(data.roomId, []);\n                    }\n                    const roomMessages = messages.get(data.roomId) || [];\n                    roomMessages.push(newMessage);\n                    messages.set(data.roomId, roomMessages);\n                    console.log(`Message added to room ${data.roomId}. Total messages: ${roomMessages.length}`);\n                    console.log(`Room ${data.roomId} members:`, Array.from(targetRoom.members));\n                } else {\n                    // Direct message logic remains the same\n                    const dmId = getDMId(userId, data.recipientId);\n                    const dmMessages = messages.get(dmId) || [];\n                    dmMessages.push(newMessage);\n                    messages.set(dmId, dmMessages);\n                    console.log(`DM sent from ${userId} to ${data.recipientId}: ${data.content}`);\n                }\n                console.log(\"Message processed successfully:\", newMessage);\n                return Response.json({\n                    success: true,\n                    type: \"message_sent\",\n                    data: newMessage\n                });\n            case \"get_messages\":\n                if (data.type === \"room\") {\n                    const requestingClient = clients.get(userId);\n                    const requestedRoom = rooms.get(data.roomId);\n                    if (!requestingClient || !requestedRoom) {\n                        return Response.json({\n                            success: false,\n                            error: \"Room or user not found\"\n                        });\n                    }\n                    // Auto-join user to room if not already a member\n                    if (!requestedRoom.members.has(userId)) {\n                        requestedRoom.members.add(userId);\n                        requestingClient.joinedRooms.add(data.roomId);\n                        requestingClient.currentRoom = data.roomId;\n                        // Update persistent memberships\n                        if (!userRoomMemberships.has(userId)) {\n                            userRoomMemberships.set(userId, new Set());\n                        }\n                        userRoomMemberships.get(userId).add(data.roomId);\n                    }\n                    // Initialize message array if it doesn't exist\n                    if (!messages.has(data.roomId)) {\n                        console.log(`Initializing empty message array for room ${data.roomId}`);\n                        messages.set(data.roomId, []);\n                    }\n                    const roomMessages = messages.get(data.roomId) || [];\n                    return Response.json({\n                        success: true,\n                        type: \"room_messages\",\n                        data: {\n                            roomId: data.roomId,\n                            messages: roomMessages,\n                            memberCount: requestedRoom.members.size\n                        }\n                    });\n                } else {\n                    // Direct messages\n                    const dmId = getDMId(userId, data.recipientId);\n                    const dmMessages = messages.get(dmId) || [];\n                    return Response.json({\n                        success: true,\n                        type: \"dm_messages\",\n                        data: {\n                            recipientId: data.recipientId,\n                            messages: dmMessages\n                        }\n                    });\n                }\n            case \"search_rooms\":\n                const query = data.query?.toLowerCase() || \"\";\n                const searchResults = Array.from(rooms.values()).filter((room)=>room.isPublic && (room.name.toLowerCase().includes(query) || room.description.toLowerCase().includes(query) || room.id.toLowerCase().includes(query))).map((room)=>({\n                        id: room.id,\n                        name: room.name,\n                        description: room.description,\n                        memberCount: room.members.size,\n                        isMember: room.members.has(userId)\n                    }));\n                return Response.json({\n                    success: true,\n                    type: \"search_results\",\n                    data: {\n                        rooms: searchResults,\n                        query\n                    }\n                });\n            case \"create_room\":\n                const creator = clients.get(userId);\n                if (!creator) {\n                    return Response.json({\n                        success: false,\n                        error: \"User not found\"\n                    });\n                }\n                const roomId = data.name.toLowerCase().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\");\n                if (rooms.has(roomId)) {\n                    return Response.json({\n                        success: false,\n                        error: \"Room already exists\"\n                    });\n                }\n                const newRoom = {\n                    id: roomId,\n                    name: data.name,\n                    description: data.description || \"\",\n                    createdBy: userId,\n                    createdAt: Date.now(),\n                    members: new Set([\n                        userId\n                    ]),\n                    isPrivate: false,\n                    isPublic: true\n                };\n                rooms.set(roomId, newRoom);\n                creator.joinedRooms.add(roomId);\n                creator.currentRoom = roomId;\n                // Persist membership for creator\n                if (!userRoomMemberships.has(userId)) {\n                    userRoomMemberships.set(userId, new Set());\n                }\n                userRoomMemberships.get(userId).add(roomId);\n                // Add welcome message to new room\n                const welcomeMessage = {\n                    id: crypto.randomUUID(),\n                    user: \"DevTea Bot\",\n                    content: `Welcome to ${data.name}! ðŸŽ‰ This room was created by ${creator.username}. ${data.description || \"Start chatting!\"}`,\n                    timestamp: Date.now(),\n                    type: \"room\",\n                    roomId: roomId\n                };\n                messages.set(roomId, [\n                    welcomeMessage\n                ]);\n                console.log(`Room ${roomId} initialized with welcome message. Current rooms with messages:`, Array.from(messages.keys()));\n                console.log(`Room created: ${roomId} by ${creator.username}`);\n                return Response.json({\n                    success: true,\n                    type: \"room_created\",\n                    data: {\n                        ...newRoom,\n                        members: Array.from(newRoom.members),\n                        memberCount: newRoom.members.size\n                    }\n                });\n            case \"get_rooms\":\n                const userClient = clients.get(userId);\n                const publicRooms = Array.from(rooms.values()).filter((room)=>room.isPublic).map((room)=>({\n                        id: room.id,\n                        name: room.name,\n                        description: room.description,\n                        memberCount: room.members.size,\n                        isMember: userClient ? room.members.has(userId) : false,\n                        isJoined: userClient ? userClient.joinedRooms.has(room.id) : false\n                    }));\n                return Response.json({\n                    success: true,\n                    type: \"rooms_list\",\n                    data: {\n                        rooms: publicRooms\n                    }\n                });\n            case \"get_joined_rooms\":\n                const joinedClient = clients.get(userId);\n                if (!joinedClient) {\n                    return Response.json({\n                        success: false,\n                        error: \"User not found\"\n                    });\n                }\n                const joinedRooms = Array.from(joinedClient.joinedRooms).map((roomId)=>rooms.get(roomId)).filter(Boolean).map((room)=>({\n                        id: room.id,\n                        name: room.name,\n                        description: room.description,\n                        memberCount: room.members.size,\n                        isMember: true,\n                        isJoined: true\n                    }));\n                return Response.json({\n                    success: true,\n                    type: \"joined_rooms\",\n                    data: {\n                        rooms: joinedRooms\n                    }\n                });\n            case \"edit_message\":\n                const editResult = editMessage(data.messageId, data.content, data.roomId, data.recipientId, userId);\n                return Response.json(editResult);\n            case \"delete_message\":\n                const deleteResult = deleteMessage(data.messageId, data.roomId, data.recipientId, userId);\n                return Response.json(deleteResult);\n            case \"get_online_users\":\n                const onlineUsers = Array.from(clients.values()).filter((client)=>Date.now() - client.lastSeen < 300000) // 5 minutes\n                .map((client)=>({\n                        userId: client.userId,\n                        username: client.username,\n                        currentRoom: client.currentRoom,\n                        joinedRooms: Array.from(client.joinedRooms)\n                    }));\n                return Response.json({\n                    success: true,\n                    type: \"online_users\",\n                    data: {\n                        users: onlineUsers\n                    }\n                });\n            case \"get_room_members\":\n                const targetRoom = rooms.get(data.roomId);\n                if (!targetRoom) {\n                    return Response.json({\n                        success: false,\n                        error: \"Room not found\"\n                    });\n                }\n                const members = Array.from(targetRoom.members).map((memberId)=>clients.get(memberId)).filter(Boolean).map((member)=>({\n                        userId: member.userId,\n                        username: member.username,\n                        isOnline: Date.now() - member.lastSeen < 300000\n                    }));\n                return Response.json({\n                    success: true,\n                    type: \"room_members\",\n                    data: {\n                        roomId: data.roomId,\n                        members\n                    }\n                });\n            default:\n                return Response.json({\n                    success: false,\n                    error: \"Unknown message type\"\n                }, {\n                    status: 500\n                });\n        }\n    } catch (error) {\n        console.error(\"WebSocket API error:\", error);\n        return Response.json({\n            success: false,\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nfunction getDMId(userId1, userId2) {\n    return [\n        userId1,\n        userId2\n    ].sort().join(\"-dm-\");\n}\nfunction editMessage(messageId, content, roomId, recipientId, userId) {\n    const targetId = roomId || getDMId(userId, recipientId);\n    const targetMessages = messages.get(targetId) || [];\n    const messageIndex = targetMessages.findIndex((m)=>m.id === messageId);\n    if (messageIndex !== -1) {\n        const message = targetMessages[messageIndex];\n        const userClient = clients.get(userId);\n        if (message.user === userClient?.username) {\n            targetMessages[messageIndex] = {\n                ...message,\n                content,\n                edited: true\n            };\n            return {\n                success: true,\n                type: \"message_edited\",\n                data: targetMessages[messageIndex]\n            };\n        }\n    }\n    return {\n        success: false,\n        error: \"Message not found or unauthorized\"\n    };\n}\nfunction deleteMessage(messageId, roomId, recipientId, userId) {\n    const targetId = roomId || getDMId(userId, recipientId);\n    const targetMessages = messages.get(targetId) || [];\n    const messageIndex = targetMessages.findIndex((m)=>m.id === messageId);\n    if (messageIndex !== -1) {\n        const message = targetMessages[messageIndex];\n        const userClient = clients.get(userId);\n        if (message.user === userClient?.username) {\n            targetMessages.splice(messageIndex, 1);\n            return {\n                success: true,\n                type: \"message_deleted\",\n                data: {\n                    messageId\n                }\n            };\n        }\n    }\n    return {\n        success: false,\n        error: \"Message not found or unauthorized\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxPQUFPO2dCQUNMakUsU0FBUztnQkFDVDVCLE1BQU07Z0JBQ05rQixNQUFNc0UsY0FBYyxDQUFDQyxhQUFhO1lBQ3BDO1FBQ0Y7SUFDRjtJQUVBLE9BQU87UUFBRTdELFNBQVM7UUFBT00sT0FBTztJQUFvQztBQUN0RTtBQUVBLFNBQVMyQyxjQUFjRixTQUFpQixFQUFFMUUsTUFBZSxFQUFFK0MsV0FBb0IsRUFBRTdCLE1BQWU7SUFDOUYsTUFBTW9FLFdBQVd0RixVQUFVbUQsUUFBUWpDLFFBQVM2QjtJQUM1QyxNQUFNd0MsaUJBQWlCaEgsU0FBU3NDLEdBQUcsQ0FBQ3lFLGFBQWEsRUFBRTtJQUNuRCxNQUFNRSxlQUFlRCxlQUFlRSxTQUFTLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRTNHLEVBQUUsS0FBSzJGO0lBRTlELElBQUljLGlCQUFpQixDQUFDLEdBQUc7UUFDdkIsTUFBTUcsVUFBVUosY0FBYyxDQUFDQyxhQUFhO1FBQzVDLE1BQU1yQixhQUFhOUYsUUFBUXdDLEdBQUcsQ0FBQ0s7UUFFL0IsSUFBSXlFLFFBQVEvRixJQUFJLEtBQUt1RSxZQUFZN0MsVUFBVTtZQUN6Q2lFLGVBQWVNLE1BQU0sQ0FBQ0wsY0FBYztZQUNwQyxPQUFPO2dCQUNMN0QsU0FBUztnQkFDVDVCLE1BQU07Z0JBQ05rQixNQUFNO29CQUFFeUQ7Z0JBQVU7WUFDcEI7UUFDRjtJQUNGO0lBRUEsT0FBTztRQUFFL0MsU0FBUztRQUFPTSxPQUFPO0lBQW9DO0FBQ3RFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2dGVhLWNoYXQvLi9hcHAvYXBpL3dlYnNvY2tldC9yb3V0ZS50cz83YjgyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuXG5pbnRlcmZhY2UgTWVzc2FnZSB7XG4gIGlkOiBzdHJpbmdcbiAgdXNlcjogc3RyaW5nXG4gIGNvbnRlbnQ6IHN0cmluZ1xuICB0aW1lc3RhbXA6IG51bWJlclxuICBlZGl0ZWQ/OiBib29sZWFuXG4gIHJvb21JZD86IHN0cmluZ1xuICByZWNpcGllbnRJZD86IHN0cmluZ1xuICB0eXBlOiBcInJvb21cIiB8IFwiZG1cIlxufVxuXG5pbnRlcmZhY2UgQ2xpZW50IHtcbiAgdXNlcklkOiBzdHJpbmdcbiAgdXNlcm5hbWU6IHN0cmluZ1xuICBjdXJyZW50Um9vbT86IHN0cmluZ1xuICBsYXN0U2VlbjogbnVtYmVyXG4gIGpvaW5lZFJvb21zOiBTZXQ8c3RyaW5nPlxufVxuXG5pbnRlcmZhY2UgUm9vbSB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgY3JlYXRlZEJ5OiBzdHJpbmdcbiAgY3JlYXRlZEF0OiBudW1iZXJcbiAgbWVtYmVyczogU2V0PHN0cmluZz5cbiAgaXNQcml2YXRlOiBib29sZWFuXG4gIGlzUHVibGljOiBib29sZWFuXG59XG5cbi8vIEVuaGFuY2VkIGluLW1lbW9yeSBzdG9yYWdlXG5jb25zdCBjbGllbnRzID0gbmV3IE1hcDxzdHJpbmcsIENsaWVudD4oKVxuY29uc3QgbWVzc2FnZXMgPSBuZXcgTWFwPHN0cmluZywgTWVzc2FnZVtdPigpXG5jb25zdCB0eXBpbmdVc2VycyA9IG5ldyBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4oKVxuY29uc3Qgcm9vbXMgPSBuZXcgTWFwPHN0cmluZywgUm9vbT4oKVxuY29uc3QgdXNlclJvb21NZW1iZXJzaGlwcyA9IG5ldyBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4oKSAvLyB1c2VySWQgLT4gU2V0IG9mIHJvb21JZHNcblxuLy8gSW5pdGlhbGl6ZSBkZWZhdWx0IHJvb21zIGFuZCBtZXNzYWdlc1xuaWYgKHJvb21zLnNpemUgPT09IDApIHtcbiAgY29uc29sZS5sb2coXCJJbml0aWFsaXppbmcgZGVmYXVsdCByb29tcy4uLlwiKVxuXG4gIC8vIENyZWF0ZSBkZWZhdWx0IHJvb21zXG4gIHJvb21zLnNldChcImdlbmVyYWxcIiwge1xuICAgIGlkOiBcImdlbmVyYWxcIixcbiAgICBuYW1lOiBcIkdlbmVyYWxcIixcbiAgICBkZXNjcmlwdGlvbjogXCJHZW5lcmFsIGRpc2N1c3Npb24gZm9yIGFsbCBkZXZlbG9wZXJzXCIsXG4gICAgY3JlYXRlZEJ5OiBcInN5c3RlbVwiLFxuICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICBtZW1iZXJzOiBuZXcgU2V0KCksXG4gICAgaXNQcml2YXRlOiBmYWxzZSxcbiAgICBpc1B1YmxpYzogdHJ1ZSxcbiAgfSlcblxuICByb29tcy5zZXQoXCJmcm9udGVuZFwiLCB7XG4gICAgaWQ6IFwiZnJvbnRlbmRcIixcbiAgICBuYW1lOiBcIkZyb250ZW5kIERldnNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJSZWFjdCwgVnVlLCBBbmd1bGFyLCBhbmQgYWxsIHRoaW5ncyBmcm9udGVuZFwiLFxuICAgIGNyZWF0ZWRCeTogXCJzeXN0ZW1cIixcbiAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgbWVtYmVyczogbmV3IFNldCgpLFxuICAgIGlzUHJpdmF0ZTogZmFsc2UsXG4gICAgaXNQdWJsaWM6IHRydWUsXG4gIH0pXG5cbiAgcm9vbXMuc2V0KFwiYmFja2VuZFwiLCB7XG4gICAgaWQ6IFwiYmFja2VuZFwiLFxuICAgIG5hbWU6IFwiQmFja2VuZCBEZXZzXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQVBJcywgZGF0YWJhc2VzLCBzZXJ2ZXJzLCBhbmQgYmFja2VuZCBhcmNoaXRlY3R1cmVcIixcbiAgICBjcmVhdGVkQnk6IFwic3lzdGVtXCIsXG4gICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgIG1lbWJlcnM6IG5ldyBTZXQoKSxcbiAgICBpc1ByaXZhdGU6IGZhbHNlLFxuICAgIGlzUHVibGljOiB0cnVlLFxuICB9KVxuXG4gIHJvb21zLnNldChcIm1vYmlsZVwiLCB7XG4gICAgaWQ6IFwibW9iaWxlXCIsXG4gICAgbmFtZTogXCJNb2JpbGUgRGV2ZWxvcG1lbnRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJpT1MsIEFuZHJvaWQsIFJlYWN0IE5hdGl2ZSwgRmx1dHRlciBkaXNjdXNzaW9uc1wiLFxuICAgIGNyZWF0ZWRCeTogXCJzeXN0ZW1cIixcbiAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgbWVtYmVyczogbmV3IFNldCgpLFxuICAgIGlzUHJpdmF0ZTogZmFsc2UsXG4gICAgaXNQdWJsaWM6IHRydWUsXG4gIH0pXG5cbiAgcm9vbXMuc2V0KFwiZGV2b3BzXCIsIHtcbiAgICBpZDogXCJkZXZvcHNcIixcbiAgICBuYW1lOiBcIkRldk9wcyAmIEluZnJhc3RydWN0dXJlXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQ0kvQ0QsIERvY2tlciwgS3ViZXJuZXRlcywgY2xvdWQgcGxhdGZvcm1zXCIsXG4gICAgY3JlYXRlZEJ5OiBcInN5c3RlbVwiLFxuICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICBtZW1iZXJzOiBuZXcgU2V0KCksXG4gICAgaXNQcml2YXRlOiBmYWxzZSxcbiAgICBpc1B1YmxpYzogdHJ1ZSxcbiAgfSlcblxuICAvLyBBZGQgd2VsY29tZSBtZXNzYWdlcyBmb3IgZWFjaCByb29tXG4gIGNvbnN0IHdlbGNvbWVNZXNzYWdlcyA9IHtcbiAgICBnZW5lcmFsOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIndlbGNvbWUtZ2VuZXJhbC0xXCIsXG4gICAgICAgIHVzZXI6IFwiRGV2VGVhIEJvdFwiLFxuICAgICAgICBjb250ZW50OlxuICAgICAgICAgIFwiV2VsY29tZSB0byB0aGUgR2VuZXJhbCBkaXNjdXNzaW9uIHJvb20hIPCfkYsgVGhpcyBpcyB3aGVyZSBkZXZlbG9wZXJzIGZyb20gYWxsIGJhY2tncm91bmRzIGNvbWUgdG9nZXRoZXIgdG8gY2hhdC5cIixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMzYwMDAwMCxcbiAgICAgICAgdHlwZTogXCJyb29tXCIgYXMgY29uc3QsXG4gICAgICAgIHJvb21JZDogXCJnZW5lcmFsXCIsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogXCJ3ZWxjb21lLWdlbmVyYWwtMlwiLFxuICAgICAgICB1c2VyOiBcIkRldlRlYSBCb3RcIixcbiAgICAgICAgY29udGVudDpcbiAgICAgICAgICBcIvCfkqEgVGlwOiBZb3UgY2FuIGpvaW4vbGVhdmUgcm9vbXMsIGNyZWF0ZSBuZXcgb25lcywgYW5kIHNlbmQgZGlyZWN0IG1lc3NhZ2VzLiBVc2UgdGhlIHNlYXJjaCB0byBmaW5kIHJvb21zIVwiLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAzNTAwMDAwLFxuICAgICAgICB0eXBlOiBcInJvb21cIiBhcyBjb25zdCxcbiAgICAgICAgcm9vbUlkOiBcImdlbmVyYWxcIixcbiAgICAgIH0sXG4gICAgXSxcbiAgICBmcm9udGVuZDogW1xuICAgICAge1xuICAgICAgICBpZDogXCJ3ZWxjb21lLWZyb250ZW5kLTFcIixcbiAgICAgICAgdXNlcjogXCJEZXZUZWEgQm90XCIsXG4gICAgICAgIGNvbnRlbnQ6XG4gICAgICAgICAgXCJXZWxjb21lIHRvIEZyb250ZW5kIERldnMhIPCfmoAgU2hhcmUgeW91ciBSZWFjdCwgVnVlLCBBbmd1bGFyIHRpcHMgYW5kIGRpc2N1c3MgdGhlIGxhdGVzdCBpbiBmcm9udGVuZCBkZXZlbG9wbWVudC5cIixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMzYwMDAwMCxcbiAgICAgICAgdHlwZTogXCJyb29tXCIgYXMgY29uc3QsXG4gICAgICAgIHJvb21JZDogXCJmcm9udGVuZFwiLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwid2VsY29tZS1mcm9udGVuZC0yXCIsXG4gICAgICAgIHVzZXI6IFwiRGV2VGVhIEJvdFwiLFxuICAgICAgICBjb250ZW50OiBcIvCflKUgSG90IHRvcGljczogQ29tcG9uZW50IGxpYnJhcmllcywgc3RhdGUgbWFuYWdlbWVudCwgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLCBhbmQgbW9kZXJuIENTUyFcIixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMzQwMDAwMCxcbiAgICAgICAgdHlwZTogXCJyb29tXCIgYXMgY29uc3QsXG4gICAgICAgIHJvb21JZDogXCJmcm9udGVuZFwiLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGJhY2tlbmQ6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwid2VsY29tZS1iYWNrZW5kLTFcIixcbiAgICAgICAgdXNlcjogXCJEZXZUZWEgQm90XCIsXG4gICAgICAgIGNvbnRlbnQ6XG4gICAgICAgICAgXCJXZWxjb21lIHRvIEJhY2tlbmQgRGV2cyEg8J+UpyBEaXNjdXNzIEFQSXMsIGRhdGFiYXNlcywgc2VydmVyIGFyY2hpdGVjdHVyZSwgYW5kIGJhY2tlbmQgYmVzdCBwcmFjdGljZXMuXCIsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSAtIDM2MDAwMDAsXG4gICAgICAgIHR5cGU6IFwicm9vbVwiIGFzIGNvbnN0LFxuICAgICAgICByb29tSWQ6IFwiYmFja2VuZFwiLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwid2VsY29tZS1iYWNrZW5kLTJcIixcbiAgICAgICAgdXNlcjogXCJEZXZUZWEgQm90XCIsXG4gICAgICAgIGNvbnRlbnQ6IFwi8J+SviBQb3B1bGFyIHRvcGljczogTWljcm9zZXJ2aWNlcywgZGF0YWJhc2UgZGVzaWduLCBBUEkgc2VjdXJpdHksIGFuZCBzY2FsYWJpbGl0eSBwYXR0ZXJucyFcIixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMzMwMDAwMCxcbiAgICAgICAgdHlwZTogXCJyb29tXCIgYXMgY29uc3QsXG4gICAgICAgIHJvb21JZDogXCJiYWNrZW5kXCIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgbW9iaWxlOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIndlbGNvbWUtbW9iaWxlLTFcIixcbiAgICAgICAgdXNlcjogXCJEZXZUZWEgQm90XCIsXG4gICAgICAgIGNvbnRlbnQ6XG4gICAgICAgICAgXCJXZWxjb21lIHRvIE1vYmlsZSBEZXZlbG9wbWVudCEg8J+TsSBEaXNjdXNzIGlPUywgQW5kcm9pZCwgUmVhY3QgTmF0aXZlLCBGbHV0dGVyLCBhbmQgbW9iaWxlIGJlc3QgcHJhY3RpY2VzLlwiLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAzNjAwMDAwLFxuICAgICAgICB0eXBlOiBcInJvb21cIiBhcyBjb25zdCxcbiAgICAgICAgcm9vbUlkOiBcIm1vYmlsZVwiLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGRldm9wczogW1xuICAgICAge1xuICAgICAgICBpZDogXCJ3ZWxjb21lLWRldm9wcy0xXCIsXG4gICAgICAgIHVzZXI6IFwiRGV2VGVhIEJvdFwiLFxuICAgICAgICBjb250ZW50OlxuICAgICAgICAgIFwiV2VsY29tZSB0byBEZXZPcHMgJiBJbmZyYXN0cnVjdHVyZSEg4pqZ77iPIFNoYXJlIGtub3dsZWRnZSBhYm91dCBDSS9DRCwgY29udGFpbmVyaXphdGlvbiwgYW5kIGNsb3VkIHBsYXRmb3Jtcy5cIixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMzYwMDAwMCxcbiAgICAgICAgdHlwZTogXCJyb29tXCIgYXMgY29uc3QsXG4gICAgICAgIHJvb21JZDogXCJkZXZvcHNcIixcbiAgICAgIH0sXG4gICAgXSxcbiAgfVxuXG4gIC8vIFNldCB3ZWxjb21lIG1lc3NhZ2VzIGZvciBlYWNoIHJvb21cbiAgT2JqZWN0LmVudHJpZXMod2VsY29tZU1lc3NhZ2VzKS5mb3JFYWNoKChbcm9vbUlkLCByb29tTWVzc2FnZXNdKSA9PiB7XG4gICAgbWVzc2FnZXMuc2V0KHJvb21JZCwgcm9vbU1lc3NhZ2VzKVxuICB9KVxuXG4gIGNvbnNvbGUubG9nKGBJbml0aWFsaXplZCAke3Jvb21zLnNpemV9IHJvb21zIHdpdGggd2VsY29tZSBtZXNzYWdlc2ApXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgdXBncmFkZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ1cGdyYWRlXCIpXG4gIGlmICh1cGdyYWRlICE9PSBcIndlYnNvY2tldFwiKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcIkV4cGVjdGVkIHdlYnNvY2tldFwiLCB7IHN0YXR1czogNDAwIH0pXG4gIH1cbiAgcmV0dXJuIG5ldyBSZXNwb25zZShcIldlYlNvY2tldCB1cGdyYWRlIG5vdCBzdXBwb3J0ZWQgaW4gZGV2ZWxvcG1lbnQgbW9kZVwiLCB7IHN0YXR1czogNTAxIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB0eXBlLCBkYXRhLCB1c2VySWQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgY29uc29sZS5sb2coYEFQSSBSZXF1ZXN0OiAke3R5cGV9YCwgeyB1c2VySWQsIGRhdGEgfSlcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBcInJlZ2lzdGVyXCI6XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2xpZW50ID0gY2xpZW50cy5nZXQoZGF0YS51c2VySWQpXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUm9vbXMgPSB1c2VyUm9vbU1lbWJlcnNoaXBzLmdldChkYXRhLnVzZXJJZCkgfHwgbmV3IFNldCgpXG5cbiAgICAgICAgY2xpZW50cy5zZXQoZGF0YS51c2VySWQsIHtcbiAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxuICAgICAgICAgIHVzZXJuYW1lOiBkYXRhLnVzZXJuYW1lLFxuICAgICAgICAgIGxhc3RTZWVuOiBEYXRlLm5vdygpLFxuICAgICAgICAgIGpvaW5lZFJvb21zOiBleGlzdGluZ1Jvb21zLFxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFJlc3RvcmUgdXNlciB0byB0aGVpciBwcmV2aW91c2x5IGpvaW5lZCByb29tc1xuICAgICAgICBleGlzdGluZ1Jvb21zLmZvckVhY2goKHJvb21JZCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJvb20gPSByb29tcy5nZXQocm9vbUlkKVxuICAgICAgICAgIGlmIChyb29tKSB7XG4gICAgICAgICAgICByb29tLm1lbWJlcnMuYWRkKGRhdGEudXNlcklkKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBjb25zb2xlLmxvZyhgVXNlciByZWdpc3RlcmVkOiAke2RhdGEudXNlcm5hbWV9ICgke2RhdGEudXNlcklkfSksIHJlc3RvcmVkIHRvICR7ZXhpc3RpbmdSb29tcy5zaXplfSByb29tc2ApXG5cbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdHlwZTogXCJyZWdpc3RlcmVkXCIsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgam9pbmVkUm9vbXM6IEFycmF5LmZyb20oZXhpc3RpbmdSb29tcyksXG4gICAgICAgICAgICBhdmFpbGFibGVSb29tczogQXJyYXkuZnJvbShyb29tcy5rZXlzKCkpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG5cbiAgICAgIGNhc2UgXCJqb2luX3Jvb21cIjpcbiAgICAgICAgY29uc3QgY2xpZW50ID0gY2xpZW50cy5nZXQodXNlcklkKVxuICAgICAgICBpZiAoIWNsaWVudCkge1xuICAgICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlVzZXIgbm90IGZvdW5kXCIgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJvb20gPSByb29tcy5nZXQoZGF0YS5yb29tSWQpXG4gICAgICAgIGlmICghcm9vbSkge1xuICAgICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlJvb20gbm90IGZvdW5kXCIgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBjbGllbnQgc3RhdGVcbiAgICAgICAgY2xpZW50LmN1cnJlbnRSb29tID0gZGF0YS5yb29tSWRcbiAgICAgICAgY2xpZW50Lmxhc3RTZWVuID0gRGF0ZS5ub3coKVxuICAgICAgICByb29tLm1lbWJlcnMuYWRkKHVzZXJJZClcbiAgICAgICAgY2xpZW50LmpvaW5lZFJvb21zLmFkZChkYXRhLnJvb21JZClcblxuICAgICAgICAvLyBQZXJzaXN0IG1lbWJlcnNoaXBcbiAgICAgICAgaWYgKCF1c2VyUm9vbU1lbWJlcnNoaXBzLmhhcyh1c2VySWQpKSB7XG4gICAgICAgICAgdXNlclJvb21NZW1iZXJzaGlwcy5zZXQodXNlcklkLCBuZXcgU2V0KCkpXG4gICAgICAgIH1cbiAgICAgICAgdXNlclJvb21NZW1iZXJzaGlwcy5nZXQodXNlcklkKSEuYWRkKGRhdGEucm9vbUlkKVxuXG4gICAgICAgIGNvbnN0IHJvb21NZXNzYWdlcyA9IG1lc3NhZ2VzLmdldChkYXRhLnJvb21JZCkgfHwgW11cbiAgICAgICAgY29uc29sZS5sb2coYFVzZXIgJHtjbGllbnQudXNlcm5hbWV9IGpvaW5lZCByb29tICR7ZGF0YS5yb29tSWR9LCBmb3VuZCAke3Jvb21NZXNzYWdlcy5sZW5ndGh9IG1lc3NhZ2VzYClcblxuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB0eXBlOiBcInJvb21fam9pbmVkXCIsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgcm9vbUlkOiBkYXRhLnJvb21JZCxcbiAgICAgICAgICAgIG1lc3NhZ2VzOiByb29tTWVzc2FnZXMsXG4gICAgICAgICAgICBtZW1iZXJDb3VudDogcm9vbS5tZW1iZXJzLnNpemUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcblxuICAgICAgY2FzZSBcImxlYXZlX3Jvb21cIjpcbiAgICAgICAgY29uc3QgbGVhdmluZ0NsaWVudCA9IGNsaWVudHMuZ2V0KHVzZXJJZClcbiAgICAgICAgaWYgKCFsZWF2aW5nQ2xpZW50KSB7XG4gICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiVXNlciBub3QgZm91bmRcIiB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGVhdmluZ1Jvb20gPSByb29tcy5nZXQoZGF0YS5yb29tSWQpXG4gICAgICAgIGlmICghbGVhdmluZ1Jvb20pIHtcbiAgICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJSb29tIG5vdCBmb3VuZFwiIH0pXG4gICAgICAgIH1cblxuICAgICAgICBsZWF2aW5nUm9vbS5tZW1iZXJzLmRlbGV0ZSh1c2VySWQpXG4gICAgICAgIGxlYXZpbmdDbGllbnQuam9pbmVkUm9vbXMuZGVsZXRlKGRhdGEucm9vbUlkKVxuXG4gICAgICAgIC8vIFBlcnNpc3QgdGhlIGxlYXZlXG4gICAgICAgIGNvbnN0IHVzZXJNZW1iZXJzaGlwcyA9IHVzZXJSb29tTWVtYmVyc2hpcHMuZ2V0KHVzZXJJZClcbiAgICAgICAgaWYgKHVzZXJNZW1iZXJzaGlwcykge1xuICAgICAgICAgIHVzZXJNZW1iZXJzaGlwcy5kZWxldGUoZGF0YS5yb29tSWQpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGVhdmluZ0NsaWVudC5jdXJyZW50Um9vbSA9PT0gZGF0YS5yb29tSWQpIHtcbiAgICAgICAgICBsZWF2aW5nQ2xpZW50LmN1cnJlbnRSb29tID0gdW5kZWZpbmVkXG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhgVXNlciAke2xlYXZpbmdDbGllbnQudXNlcm5hbWV9IGxlZnQgcm9vbSAke2RhdGEucm9vbUlkfWApXG5cbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdHlwZTogXCJyb29tX2xlZnRcIixcbiAgICAgICAgICBkYXRhOiB7IHJvb21JZDogZGF0YS5yb29tSWQsIG1lbWJlckNvdW50OiBsZWF2aW5nUm9vbS5tZW1iZXJzLnNpemUgfSxcbiAgICAgICAgfSlcblxuICAgICAgY2FzZSBcInNlbmRfbWVzc2FnZVwiOlxuICAgICAgICBjb25zb2xlLmxvZyhcIj09PSBBUEk6IFByb2Nlc3Npbmcgc2VuZF9tZXNzYWdlID09PVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIgSUQ6XCIsIHVzZXJJZClcbiAgICAgICAgY29uc29sZS5sb2coXCJNZXNzYWdlIGRhdGE6XCIsIGRhdGEpXG5cbiAgICAgICAgY29uc3Qgc2VuZGVyID0gY2xpZW50cy5nZXQodXNlcklkKVxuICAgICAgICBpZiAoIXNlbmRlcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJTZW5kZXIgbm90IGZvdW5kOlwiLCB1c2VySWQpXG4gICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiVXNlciBub3QgZm91bmRcIiB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3TWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgICB1c2VyOiBkYXRhLnVzZXJuYW1lLFxuICAgICAgICAgIGNvbnRlbnQ6IGRhdGEuY29udGVudCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICAgIHJvb21JZDogZGF0YS5yb29tSWQsXG4gICAgICAgICAgcmVjaXBpZW50SWQ6IGRhdGEucmVjaXBpZW50SWQsXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS50eXBlID09PSBcInJvb21cIikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiUHJvY2Vzc2luZyByb29tIG1lc3NhZ2UgZm9yIHJvb206XCIsIGRhdGEucm9vbUlkKVxuXG4gICAgICAgICAgY29uc3QgdGFyZ2V0Um9vbSA9IHJvb21zLmdldChkYXRhLnJvb21JZClcbiAgICAgICAgICBpZiAoIXRhcmdldFJvb20pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSb29tIG5vdCBmb3VuZDpcIiwgZGF0YS5yb29tSWQpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkF2YWlsYWJsZSByb29tczpcIiwgQXJyYXkuZnJvbShyb29tcy5rZXlzKCkpKVxuICAgICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiUm9vbSBub3QgZm91bmRcIiB9KVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHVzZXIgaXMgbm90IGluIHRoZSByb29tLCBhZGQgdGhlbSAodGhpcyBoZWxwcyB3aXRoIG5ld2x5IGNyZWF0ZWQgcm9vbXMpXG4gICAgICAgICAgaWYgKCF0YXJnZXRSb29tLm1lbWJlcnMuaGFzKHVzZXJJZCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBdXRvLWFkZGluZyB1c2VyICR7dXNlcklkfSAoJHtzZW5kZXIudXNlcm5hbWV9KSB0byByb29tICR7ZGF0YS5yb29tSWR9IGZvciBtZXNzYWdpbmdgKVxuICAgICAgICAgICAgdGFyZ2V0Um9vbS5tZW1iZXJzLmFkZCh1c2VySWQpXG5cbiAgICAgICAgICAgIC8vIEFsc28gdXBkYXRlIGNsaWVudCdzIGpvaW5lZCByb29tc1xuICAgICAgICAgICAgc2VuZGVyLmpvaW5lZFJvb21zLmFkZChkYXRhLnJvb21JZClcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHBlcnNpc3RlbnQgbWVtYmVyc2hpcHNcbiAgICAgICAgICAgIGlmICghdXNlclJvb21NZW1iZXJzaGlwcy5oYXModXNlcklkKSkge1xuICAgICAgICAgICAgICB1c2VyUm9vbU1lbWJlcnNoaXBzLnNldCh1c2VySWQsIG5ldyBTZXQoKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVzZXJSb29tTWVtYmVyc2hpcHMuZ2V0KHVzZXJJZCkhLmFkZChkYXRhLnJvb21JZClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJbml0aWFsaXplIG1lc3NhZ2UgYXJyYXkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICAgIGlmICghbWVzc2FnZXMuaGFzKGRhdGEucm9vbUlkKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEluaXRpYWxpemluZyBtZXNzYWdlIGFycmF5IGZvciByb29tICR7ZGF0YS5yb29tSWR9YClcbiAgICAgICAgICAgIG1lc3NhZ2VzLnNldChkYXRhLnJvb21JZCwgW10pXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qgcm9vbU1lc3NhZ2VzID0gbWVzc2FnZXMuZ2V0KGRhdGEucm9vbUlkKSB8fCBbXVxuICAgICAgICAgIHJvb21NZXNzYWdlcy5wdXNoKG5ld01lc3NhZ2UpXG4gICAgICAgICAgbWVzc2FnZXMuc2V0KGRhdGEucm9vbUlkLCByb29tTWVzc2FnZXMpXG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWVzc2FnZSBhZGRlZCB0byByb29tICR7ZGF0YS5yb29tSWR9LiBUb3RhbCBtZXNzYWdlczogJHtyb29tTWVzc2FnZXMubGVuZ3RofWApXG4gICAgICAgICAgY29uc29sZS5sb2coYFJvb20gJHtkYXRhLnJvb21JZH0gbWVtYmVyczpgLCBBcnJheS5mcm9tKHRhcmdldFJvb20ubWVtYmVycykpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRGlyZWN0IG1lc3NhZ2UgbG9naWMgcmVtYWlucyB0aGUgc2FtZVxuICAgICAgICAgIGNvbnN0IGRtSWQgPSBnZXRETUlkKHVzZXJJZCwgZGF0YS5yZWNpcGllbnRJZClcbiAgICAgICAgICBjb25zdCBkbU1lc3NhZ2VzID0gbWVzc2FnZXMuZ2V0KGRtSWQpIHx8IFtdXG4gICAgICAgICAgZG1NZXNzYWdlcy5wdXNoKG5ld01lc3NhZ2UpXG4gICAgICAgICAgbWVzc2FnZXMuc2V0KGRtSWQsIGRtTWVzc2FnZXMpXG4gICAgICAgICAgY29uc29sZS5sb2coYERNIHNlbnQgZnJvbSAke3VzZXJJZH0gdG8gJHtkYXRhLnJlY2lwaWVudElkfTogJHtkYXRhLmNvbnRlbnR9YClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTWVzc2FnZSBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5OlwiLCBuZXdNZXNzYWdlKVxuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB0eXBlOiBcIm1lc3NhZ2Vfc2VudFwiLFxuICAgICAgICAgIGRhdGE6IG5ld01lc3NhZ2UsXG4gICAgICAgIH0pXG5cbiAgICAgIGNhc2UgXCJnZXRfbWVzc2FnZXNcIjpcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gXCJyb29tXCIpIHtcbiAgICAgICAgICBjb25zdCByZXF1ZXN0aW5nQ2xpZW50ID0gY2xpZW50cy5nZXQodXNlcklkKVxuICAgICAgICAgIGNvbnN0IHJlcXVlc3RlZFJvb20gPSByb29tcy5nZXQoZGF0YS5yb29tSWQpXG5cbiAgICAgICAgICBpZiAoIXJlcXVlc3RpbmdDbGllbnQgfHwgIXJlcXVlc3RlZFJvb20pIHtcbiAgICAgICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlJvb20gb3IgdXNlciBub3QgZm91bmRcIiB9KVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEF1dG8tam9pbiB1c2VyIHRvIHJvb20gaWYgbm90IGFscmVhZHkgYSBtZW1iZXJcbiAgICAgICAgICBpZiAoIXJlcXVlc3RlZFJvb20ubWVtYmVycy5oYXModXNlcklkKSkge1xuICAgICAgICAgICAgcmVxdWVzdGVkUm9vbS5tZW1iZXJzLmFkZCh1c2VySWQpXG4gICAgICAgICAgICByZXF1ZXN0aW5nQ2xpZW50LmpvaW5lZFJvb21zLmFkZChkYXRhLnJvb21JZClcbiAgICAgICAgICAgIHJlcXVlc3RpbmdDbGllbnQuY3VycmVudFJvb20gPSBkYXRhLnJvb21JZFxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgcGVyc2lzdGVudCBtZW1iZXJzaGlwc1xuICAgICAgICAgICAgaWYgKCF1c2VyUm9vbU1lbWJlcnNoaXBzLmhhcyh1c2VySWQpKSB7XG4gICAgICAgICAgICAgIHVzZXJSb29tTWVtYmVyc2hpcHMuc2V0KHVzZXJJZCwgbmV3IFNldCgpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXNlclJvb21NZW1iZXJzaGlwcy5nZXQodXNlcklkKSEuYWRkKGRhdGEucm9vbUlkKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEluaXRpYWxpemUgbWVzc2FnZSBhcnJheSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgaWYgKCFtZXNzYWdlcy5oYXMoZGF0YS5yb29tSWQpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgSW5pdGlhbGl6aW5nIGVtcHR5IG1lc3NhZ2UgYXJyYXkgZm9yIHJvb20gJHtkYXRhLnJvb21JZH1gKVxuICAgICAgICAgICAgbWVzc2FnZXMuc2V0KGRhdGEucm9vbUlkLCBbXSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCByb29tTWVzc2FnZXMgPSBtZXNzYWdlcy5nZXQoZGF0YS5yb29tSWQpIHx8IFtdXG4gICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHR5cGU6IFwicm9vbV9tZXNzYWdlc1wiLFxuICAgICAgICAgICAgZGF0YTogeyByb29tSWQ6IGRhdGEucm9vbUlkLCBtZXNzYWdlczogcm9vbU1lc3NhZ2VzLCBtZW1iZXJDb3VudDogcmVxdWVzdGVkUm9vbS5tZW1iZXJzLnNpemUgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIERpcmVjdCBtZXNzYWdlc1xuICAgICAgICAgIGNvbnN0IGRtSWQgPSBnZXRETUlkKHVzZXJJZCwgZGF0YS5yZWNpcGllbnRJZClcbiAgICAgICAgICBjb25zdCBkbU1lc3NhZ2VzID0gbWVzc2FnZXMuZ2V0KGRtSWQpIHx8IFtdXG4gICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHR5cGU6IFwiZG1fbWVzc2FnZXNcIixcbiAgICAgICAgICAgIGRhdGE6IHsgcmVjaXBpZW50SWQ6IGRhdGEucmVjaXBpZW50SWQsIG1lc3NhZ2VzOiBkbU1lc3NhZ2VzIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwic2VhcmNoX3Jvb21zXCI6XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gZGF0YS5xdWVyeT8udG9Mb3dlckNhc2UoKSB8fCBcIlwiXG4gICAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSBBcnJheS5mcm9tKHJvb21zLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAocm9vbSkgPT5cbiAgICAgICAgICAgICAgcm9vbS5pc1B1YmxpYyAmJlxuICAgICAgICAgICAgICAocm9vbS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgICAgICAgICAgcm9vbS5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICAgICAgICAgIHJvb20uaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpLFxuICAgICAgICAgIClcbiAgICAgICAgICAubWFwKChyb29tKSA9PiAoe1xuICAgICAgICAgICAgaWQ6IHJvb20uaWQsXG4gICAgICAgICAgICBuYW1lOiByb29tLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcm9vbS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1lbWJlckNvdW50OiByb29tLm1lbWJlcnMuc2l6ZSxcbiAgICAgICAgICAgIGlzTWVtYmVyOiByb29tLm1lbWJlcnMuaGFzKHVzZXJJZCksXG4gICAgICAgICAgfSkpXG5cbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdHlwZTogXCJzZWFyY2hfcmVzdWx0c1wiLFxuICAgICAgICAgIGRhdGE6IHsgcm9vbXM6IHNlYXJjaFJlc3VsdHMsIHF1ZXJ5IH0sXG4gICAgICAgIH0pXG5cbiAgICAgIGNhc2UgXCJjcmVhdGVfcm9vbVwiOlxuICAgICAgICBjb25zdCBjcmVhdG9yID0gY2xpZW50cy5nZXQodXNlcklkKVxuICAgICAgICBpZiAoIWNyZWF0b3IpIHtcbiAgICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJVc2VyIG5vdCBmb3VuZFwiIH0pXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb29tSWQgPSBkYXRhLm5hbWVcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgICAgICAgIC5yZXBsYWNlKC9bXmEtejAtOS1dL2csIFwiXCIpXG5cbiAgICAgICAgaWYgKHJvb21zLmhhcyhyb29tSWQpKSB7XG4gICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiUm9vbSBhbHJlYWR5IGV4aXN0c1wiIH0pXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdSb29tOiBSb29tID0ge1xuICAgICAgICAgIGlkOiByb29tSWQsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IFwiXCIsXG4gICAgICAgICAgY3JlYXRlZEJ5OiB1c2VySWQsXG4gICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIG1lbWJlcnM6IG5ldyBTZXQoW3VzZXJJZF0pLFxuICAgICAgICAgIGlzUHJpdmF0ZTogZmFsc2UsXG4gICAgICAgICAgaXNQdWJsaWM6IHRydWUsXG4gICAgICAgIH1cblxuICAgICAgICByb29tcy5zZXQocm9vbUlkLCBuZXdSb29tKVxuICAgICAgICBjcmVhdG9yLmpvaW5lZFJvb21zLmFkZChyb29tSWQpXG4gICAgICAgIGNyZWF0b3IuY3VycmVudFJvb20gPSByb29tSWRcblxuICAgICAgICAvLyBQZXJzaXN0IG1lbWJlcnNoaXAgZm9yIGNyZWF0b3JcbiAgICAgICAgaWYgKCF1c2VyUm9vbU1lbWJlcnNoaXBzLmhhcyh1c2VySWQpKSB7XG4gICAgICAgICAgdXNlclJvb21NZW1iZXJzaGlwcy5zZXQodXNlcklkLCBuZXcgU2V0KCkpXG4gICAgICAgIH1cbiAgICAgICAgdXNlclJvb21NZW1iZXJzaGlwcy5nZXQodXNlcklkKSEuYWRkKHJvb21JZClcblxuICAgICAgICAvLyBBZGQgd2VsY29tZSBtZXNzYWdlIHRvIG5ldyByb29tXG4gICAgICAgIGNvbnN0IHdlbGNvbWVNZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgIHVzZXI6IFwiRGV2VGVhIEJvdFwiLFxuICAgICAgICAgIGNvbnRlbnQ6IGBXZWxjb21lIHRvICR7ZGF0YS5uYW1lfSEg8J+OiSBUaGlzIHJvb20gd2FzIGNyZWF0ZWQgYnkgJHtjcmVhdG9yLnVzZXJuYW1lfS4gJHtkYXRhLmRlc2NyaXB0aW9uIHx8IFwiU3RhcnQgY2hhdHRpbmchXCJ9YCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgdHlwZTogXCJyb29tXCIsXG4gICAgICAgICAgcm9vbUlkOiByb29tSWQsXG4gICAgICAgIH1cblxuICAgICAgICBtZXNzYWdlcy5zZXQocm9vbUlkLCBbd2VsY29tZU1lc3NhZ2VdKVxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgUm9vbSAke3Jvb21JZH0gaW5pdGlhbGl6ZWQgd2l0aCB3ZWxjb21lIG1lc3NhZ2UuIEN1cnJlbnQgcm9vbXMgd2l0aCBtZXNzYWdlczpgLFxuICAgICAgICAgIEFycmF5LmZyb20obWVzc2FnZXMua2V5cygpKSxcbiAgICAgICAgKVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGBSb29tIGNyZWF0ZWQ6ICR7cm9vbUlkfSBieSAke2NyZWF0b3IudXNlcm5hbWV9YClcblxuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB0eXBlOiBcInJvb21fY3JlYXRlZFwiLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIC4uLm5ld1Jvb20sXG4gICAgICAgICAgICBtZW1iZXJzOiBBcnJheS5mcm9tKG5ld1Jvb20ubWVtYmVycyksXG4gICAgICAgICAgICBtZW1iZXJDb3VudDogbmV3Um9vbS5tZW1iZXJzLnNpemUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcblxuICAgICAgY2FzZSBcImdldF9yb29tc1wiOlxuICAgICAgICBjb25zdCB1c2VyQ2xpZW50ID0gY2xpZW50cy5nZXQodXNlcklkKVxuICAgICAgICBjb25zdCBwdWJsaWNSb29tcyA9IEFycmF5LmZyb20ocm9vbXMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcigocm9vbSkgPT4gcm9vbS5pc1B1YmxpYylcbiAgICAgICAgICAubWFwKChyb29tKSA9PiAoe1xuICAgICAgICAgICAgaWQ6IHJvb20uaWQsXG4gICAgICAgICAgICBuYW1lOiByb29tLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcm9vbS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1lbWJlckNvdW50OiByb29tLm1lbWJlcnMuc2l6ZSxcbiAgICAgICAgICAgIGlzTWVtYmVyOiB1c2VyQ2xpZW50ID8gcm9vbS5tZW1iZXJzLmhhcyh1c2VySWQpIDogZmFsc2UsXG4gICAgICAgICAgICBpc0pvaW5lZDogdXNlckNsaWVudCA/IHVzZXJDbGllbnQuam9pbmVkUm9vbXMuaGFzKHJvb20uaWQpIDogZmFsc2UsXG4gICAgICAgICAgfSkpXG5cbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdHlwZTogXCJyb29tc19saXN0XCIsXG4gICAgICAgICAgZGF0YTogeyByb29tczogcHVibGljUm9vbXMgfSxcbiAgICAgICAgfSlcblxuICAgICAgY2FzZSBcImdldF9qb2luZWRfcm9vbXNcIjpcbiAgICAgICAgY29uc3Qgam9pbmVkQ2xpZW50ID0gY2xpZW50cy5nZXQodXNlcklkKVxuICAgICAgICBpZiAoIWpvaW5lZENsaWVudCkge1xuICAgICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlVzZXIgbm90IGZvdW5kXCIgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGpvaW5lZFJvb21zID0gQXJyYXkuZnJvbShqb2luZWRDbGllbnQuam9pbmVkUm9vbXMpXG4gICAgICAgICAgLm1hcCgocm9vbUlkKSA9PiByb29tcy5nZXQocm9vbUlkKSlcbiAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgICAgLm1hcCgocm9vbSkgPT4gKHtcbiAgICAgICAgICAgIGlkOiByb29tIS5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJvb20hLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcm9vbSEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBtZW1iZXJDb3VudDogcm9vbSEubWVtYmVycy5zaXplLFxuICAgICAgICAgICAgaXNNZW1iZXI6IHRydWUsXG4gICAgICAgICAgICBpc0pvaW5lZDogdHJ1ZSxcbiAgICAgICAgICB9KSlcblxuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB0eXBlOiBcImpvaW5lZF9yb29tc1wiLFxuICAgICAgICAgIGRhdGE6IHsgcm9vbXM6IGpvaW5lZFJvb21zIH0sXG4gICAgICAgIH0pXG5cbiAgICAgIGNhc2UgXCJlZGl0X21lc3NhZ2VcIjpcbiAgICAgICAgY29uc3QgZWRpdFJlc3VsdCA9IGVkaXRNZXNzYWdlKGRhdGEubWVzc2FnZUlkLCBkYXRhLmNvbnRlbnQsIGRhdGEucm9vbUlkLCBkYXRhLnJlY2lwaWVudElkLCB1c2VySWQpXG4gICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKGVkaXRSZXN1bHQpXG5cbiAgICAgIGNhc2UgXCJkZWxldGVfbWVzc2FnZVwiOlxuICAgICAgICBjb25zdCBkZWxldGVSZXN1bHQgPSBkZWxldGVNZXNzYWdlKGRhdGEubWVzc2FnZUlkLCBkYXRhLnJvb21JZCwgZGF0YS5yZWNpcGllbnRJZCwgdXNlcklkKVxuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbihkZWxldGVSZXN1bHQpXG5cbiAgICAgIGNhc2UgXCJnZXRfb25saW5lX3VzZXJzXCI6XG4gICAgICAgIGNvbnN0IG9ubGluZVVzZXJzID0gQXJyYXkuZnJvbShjbGllbnRzLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIoKGNsaWVudCkgPT4gRGF0ZS5ub3coKSAtIGNsaWVudC5sYXN0U2VlbiA8IDMwMDAwMCkgLy8gNSBtaW51dGVzXG4gICAgICAgICAgLm1hcCgoY2xpZW50KSA9PiAoe1xuICAgICAgICAgICAgdXNlcklkOiBjbGllbnQudXNlcklkLFxuICAgICAgICAgICAgdXNlcm5hbWU6IGNsaWVudC51c2VybmFtZSxcbiAgICAgICAgICAgIGN1cnJlbnRSb29tOiBjbGllbnQuY3VycmVudFJvb20sXG4gICAgICAgICAgICBqb2luZWRSb29tczogQXJyYXkuZnJvbShjbGllbnQuam9pbmVkUm9vbXMpLFxuICAgICAgICAgIH0pKVxuXG4gICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHR5cGU6IFwib25saW5lX3VzZXJzXCIsXG4gICAgICAgICAgZGF0YTogeyB1c2Vyczogb25saW5lVXNlcnMgfSxcbiAgICAgICAgfSlcblxuICAgICAgY2FzZSBcImdldF9yb29tX21lbWJlcnNcIjpcbiAgICAgICAgY29uc3QgdGFyZ2V0Um9vbSA9IHJvb21zLmdldChkYXRhLnJvb21JZClcbiAgICAgICAgaWYgKCF0YXJnZXRSb29tKSB7XG4gICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiUm9vbSBub3QgZm91bmRcIiB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVtYmVycyA9IEFycmF5LmZyb20odGFyZ2V0Um9vbS5tZW1iZXJzKVxuICAgICAgICAgIC5tYXAoKG1lbWJlcklkKSA9PiBjbGllbnRzLmdldChtZW1iZXJJZCkpXG4gICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAgIC5tYXAoKG1lbWJlcikgPT4gKHtcbiAgICAgICAgICAgIHVzZXJJZDogbWVtYmVyIS51c2VySWQsXG4gICAgICAgICAgICB1c2VybmFtZTogbWVtYmVyIS51c2VybmFtZSxcbiAgICAgICAgICAgIGlzT25saW5lOiBEYXRlLm5vdygpIC0gbWVtYmVyIS5sYXN0U2VlbiA8IDMwMDAwMCxcbiAgICAgICAgICB9KSlcblxuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB0eXBlOiBcInJvb21fbWVtYmVyc1wiLFxuICAgICAgICAgIGRhdGE6IHsgcm9vbUlkOiBkYXRhLnJvb21JZCwgbWVtYmVycyB9LFxuICAgICAgICB9KVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJVbmtub3duIG1lc3NhZ2UgdHlwZVwiIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIldlYlNvY2tldCBBUEkgZXJyb3I6XCIsIGVycm9yKVxuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRETUlkKHVzZXJJZDE6IHN0cmluZywgdXNlcklkMjogc3RyaW5nKSB7XG4gIHJldHVybiBbdXNlcklkMSwgdXNlcklkMl0uc29ydCgpLmpvaW4oXCItZG0tXCIpXG59XG5cbmZ1bmN0aW9uIGVkaXRNZXNzYWdlKG1lc3NhZ2VJZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIHJvb21JZD86IHN0cmluZywgcmVjaXBpZW50SWQ/OiBzdHJpbmcsIHVzZXJJZD86IHN0cmluZykge1xuICBjb25zdCB0YXJnZXRJZCA9IHJvb21JZCB8fCBnZXRETUlkKHVzZXJJZCEsIHJlY2lwaWVudElkISlcbiAgY29uc3QgdGFyZ2V0TWVzc2FnZXMgPSBtZXNzYWdlcy5nZXQodGFyZ2V0SWQpIHx8IFtdXG4gIGNvbnN0IG1lc3NhZ2VJbmRleCA9IHRhcmdldE1lc3NhZ2VzLmZpbmRJbmRleCgobSkgPT4gbS5pZCA9PT0gbWVzc2FnZUlkKVxuXG4gIGlmIChtZXNzYWdlSW5kZXggIT09IC0xKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRhcmdldE1lc3NhZ2VzW21lc3NhZ2VJbmRleF1cbiAgICBjb25zdCB1c2VyQ2xpZW50ID0gY2xpZW50cy5nZXQodXNlcklkISlcblxuICAgIGlmIChtZXNzYWdlLnVzZXIgPT09IHVzZXJDbGllbnQ/LnVzZXJuYW1lKSB7XG4gICAgICB0YXJnZXRNZXNzYWdlc1ttZXNzYWdlSW5kZXhdID0geyAuLi5tZXNzYWdlLCBjb250ZW50LCBlZGl0ZWQ6IHRydWUgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdHlwZTogXCJtZXNzYWdlX2VkaXRlZFwiLFxuICAgICAgICBkYXRhOiB0YXJnZXRNZXNzYWdlc1ttZXNzYWdlSW5kZXhdLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJNZXNzYWdlIG5vdCBmb3VuZCBvciB1bmF1dGhvcml6ZWRcIiB9XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZU1lc3NhZ2UobWVzc2FnZUlkOiBzdHJpbmcsIHJvb21JZD86IHN0cmluZywgcmVjaXBpZW50SWQ/OiBzdHJpbmcsIHVzZXJJZD86IHN0cmluZykge1xuICBjb25zdCB0YXJnZXRJZCA9IHJvb21JZCB8fCBnZXRETUlkKHVzZXJJZCEsIHJlY2lwaWVudElkISlcbiAgY29uc3QgdGFyZ2V0TWVzc2FnZXMgPSBtZXNzYWdlcy5nZXQodGFyZ2V0SWQpIHx8IFtdXG4gIGNvbnN0IG1lc3NhZ2VJbmRleCA9IHRhcmdldE1lc3NhZ2VzLmZpbmRJbmRleCgobSkgPT4gbS5pZCA9PT0gbWVzc2FnZUlkKVxuXG4gIGlmIChtZXNzYWdlSW5kZXggIT09IC0xKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRhcmdldE1lc3NhZ2VzW21lc3NhZ2VJbmRleF1cbiAgICBjb25zdCB1c2VyQ2xpZW50ID0gY2xpZW50cy5nZXQodXNlcklkISlcblxuICAgIGlmIChtZXNzYWdlLnVzZXIgPT09IHVzZXJDbGllbnQ/LnVzZXJuYW1lKSB7XG4gICAgICB0YXJnZXRNZXNzYWdlcy5zcGxpY2UobWVzc2FnZUluZGV4LCAxKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdHlwZTogXCJtZXNzYWdlX2RlbGV0ZWRcIixcbiAgICAgICAgZGF0YTogeyBtZXNzYWdlSWQgfSxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTWVzc2FnZSBub3QgZm91bmQgb3IgdW5hdXRob3JpemVkXCIgfVxufVxuIl0sIm5hbWVzIjpbImNsaWVudHMiLCJNYXAiLCJtZXNzYWdlcyIsInR5cGluZ1VzZXJzIiwicm9vbXMiLCJ1c2VyUm9vbU1lbWJlcnNoaXBzIiwic2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJzZXQiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImNyZWF0ZWRCeSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJub3ciLCJtZW1iZXJzIiwiU2V0IiwiaXNQcml2YXRlIiwiaXNQdWJsaWMiLCJ3ZWxjb21lTWVzc2FnZXMiLCJnZW5lcmFsIiwidXNlciIsImNvbnRlbnQiLCJ0aW1lc3RhbXAiLCJ0eXBlIiwicm9vbUlkIiwiZnJvbnRlbmQiLCJiYWNrZW5kIiwibW9iaWxlIiwiZGV2b3BzIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJyb29tTWVzc2FnZXMiLCJHRVQiLCJyZXF1ZXN0IiwidXBncmFkZSIsImhlYWRlcnMiLCJnZXQiLCJSZXNwb25zZSIsInN0YXR1cyIsIlBPU1QiLCJkYXRhIiwidXNlcklkIiwianNvbiIsImV4aXN0aW5nQ2xpZW50IiwiZXhpc3RpbmdSb29tcyIsInVzZXJuYW1lIiwibGFzdFNlZW4iLCJqb2luZWRSb29tcyIsInJvb20iLCJhZGQiLCJzdWNjZXNzIiwiQXJyYXkiLCJmcm9tIiwiYXZhaWxhYmxlUm9vbXMiLCJrZXlzIiwiY2xpZW50IiwiZXJyb3IiLCJjdXJyZW50Um9vbSIsImhhcyIsImxlbmd0aCIsIm1lbWJlckNvdW50IiwibGVhdmluZ0NsaWVudCIsImxlYXZpbmdSb29tIiwiZGVsZXRlIiwidXNlck1lbWJlcnNoaXBzIiwidW5kZWZpbmVkIiwic2VuZGVyIiwibmV3TWVzc2FnZSIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJyZWNpcGllbnRJZCIsInRhcmdldFJvb20iLCJwdXNoIiwiZG1JZCIsImdldERNSWQiLCJkbU1lc3NhZ2VzIiwicmVxdWVzdGluZ0NsaWVudCIsInJlcXVlc3RlZFJvb20iLCJxdWVyeSIsInRvTG93ZXJDYXNlIiwic2VhcmNoUmVzdWx0cyIsInZhbHVlcyIsImZpbHRlciIsImluY2x1ZGVzIiwibWFwIiwiaXNNZW1iZXIiLCJjcmVhdG9yIiwicmVwbGFjZSIsIm5ld1Jvb20iLCJ3ZWxjb21lTWVzc2FnZSIsInVzZXJDbGllbnQiLCJwdWJsaWNSb29tcyIsImlzSm9pbmVkIiwiam9pbmVkQ2xpZW50IiwiQm9vbGVhbiIsImVkaXRSZXN1bHQiLCJlZGl0TWVzc2FnZSIsIm1lc3NhZ2VJZCIsImRlbGV0ZVJlc3VsdCIsImRlbGV0ZU1lc3NhZ2UiLCJvbmxpbmVVc2VycyIsInVzZXJzIiwibWVtYmVySWQiLCJtZW1iZXIiLCJpc09ubGluZSIsInVzZXJJZDEiLCJ1c2VySWQyIiwic29ydCIsImpvaW4iLCJ0YXJnZXRJZCIsInRhcmdldE1lc3NhZ2VzIiwibWVzc2FnZUluZGV4IiwiZmluZEluZGV4IiwibSIsIm1lc3NhZ2UiLCJlZGl0ZWQiLCJzcGxpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/websocket/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebsocket%2Froute&page=%2Fapi%2Fwebsocket%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebsocket%2Froute.ts&appDir=T%3A%5CDevTea%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=T%3A%5CDevTea&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();